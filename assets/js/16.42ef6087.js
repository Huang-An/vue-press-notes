(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{529:function(t,s,a){"use strict";a.r(s);var n=a(6),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[a("img",{attrs:{src:"/image/webpack-logo.jpg",alt:"webpack-logo"}})]),t._v(" "),a("p",[t._v("本系列文章为学习 webpack 的笔记，将系统的介绍 webpack。")]),t._v(" "),a("h2",{attrs:{id:"webpack-作用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack-作用"}},[t._v("#")]),t._v(" webpack 作用")]),t._v(" "),a("p",[t._v("webpack 模块打包机 分析项目结构 模块依赖 编译打包为适合格式提供给浏览器使用。")]),t._v(" "),a("h2",{attrs:{id:"webpack-名词解释"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack-名词解释"}},[t._v("#")]),t._v(" webpack 名词解释")]),t._v(" "),a("p",[t._v("在学习 webpack 时，常对一些名词不能够理解，在这里有必要对这些名词进行释义")]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("module")]),t._v(": 在 webpack 中一切皆视为模块。如自己编写的 js/ts 代码（它们无论是 ESM 、 commonJS 或是 AMD 规范）、图片、css、scss 文件等。")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("chunk")]),t._v(": 当我们写的 module 源文件传到 webpack 进行打包时，webpack 会根据文件引用关系生成一些 chunk 文件，webpack 会对这个 chunk 文件进行一些操作，chunk 是代码块的意思。")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("bundle")]),t._v(": webpack 处理好 chunk 后，最后会输出 bundle 文件，这个 bundle 文件包含了经过加载和编译的最终源文件，所以它可以直接在浏览器中运行。")])])]),t._v(" "),a("p",[t._v("因此 module，chunk 和 bundle 其实就是同一份逻辑代码在不同转换场景下的取了三个名字")]),t._v(" "),a("p",[t._v("通常来说 一个 chunk 最终对应一个 bundle。但有时，多个 chunk 也可以合成一个 bundle，一个 chunk 也可以分离成多个 bundle")]),t._v(" "),a("h2",{attrs:{id:"webpack-常用作用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack-常用作用"}},[t._v("#")]),t._v(" webpack 常用作用")]),t._v(" "),a("ul",[a("li",[t._v("代码转换 babel、ts 转换为 js 等。")]),t._v(" "),a("li",[t._v("文件优化，压缩混淆等。")]),t._v(" "),a("li",[t._v("代码分割 提取公共代码，代码异步加载。")]),t._v(" "),a("li",[t._v("模块合并 模块可以分类合并成一个文件。")]),t._v(" "),a("li",[t._v("自动刷新热加载。")]),t._v(" "),a("li",[t._v("代码校验 eslint commit-lint 等。")]),t._v(" "),a("li",[t._v("自动发布 如发布到 cnd 等。")])]),t._v(" "),a("h2",{attrs:{id:"一份简单-webpack-配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一份简单-webpack-配置文件"}},[t._v("#")]),t._v(" 一份简单 webpack 配置文件")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" path "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'path'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 由于生产环境下和开发环境下，对代码的优化需求可能不一致")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 通过 mode 可以 告知 webpack 使用相应模式的内置优化")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// mode 可选 development、production、none")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 或者通过 CLI 参数传递 webpack --mode=development")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 详细看 https://webpack.docschina.org/configuration/mode/#usage")]),t._v("\n  mode"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'development'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 入口文件位置 告知 webpack 从哪里开始构建模块依赖图")]),t._v("\n  entry"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/index.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 打包后的输出位置")]),t._v("\n  output"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 输出位置的路径")]),t._v("\n    path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("___dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dist'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 输出文件名")]),t._v("\n    filename"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bundle.js'")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 开发服务器")]),t._v("\n  devServer"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// express 文件 路径")]),t._v("\n    contentBase"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("___dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dist'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 端口")]),t._v("\n    port"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8080")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 主机地址")]),t._v("\n    host"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0.0.0.0'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 为每个静态文件开启 gzip 压缩")]),t._v("\n    comporess"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 模块相关配置")]),t._v("\n  module"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 配置模块的解析规则")]),t._v("\n    rules"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        test"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("\\.css$")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 从右到左处理  先交给 css-loader 再交个 style-loader")]),t._v("\n        use"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'style-loader'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'css-loader'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);